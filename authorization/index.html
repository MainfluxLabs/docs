<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://mainflux.com/index.html/authorization/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Authorization - MainfluxLabs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Authorization";
        var mkdocs_page_input_path = "authorization.md";
        var mkdocs_page_url = "/index.html/authorization/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> MainfluxLabs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Overview</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../architecture/">Architecture</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../getting-started/">Getting Started</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../authentication/">Authentication</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Authorization</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#roles">Roles</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#viewer">Viewer</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#editor">Editor</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#admin">Admin</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#owner">Owner</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#root-admin">Root Admin</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#org-members">Org Members</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#examples-of-unauthorized-access">Examples of unauthorized access</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#group-members">Group Members</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../api/">API</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../messaging/">Messaging</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../storage/">Storage</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../edge/">Edge</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../security/">Security</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../cli/">CLI</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../tracing/">Tracing</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../dev-guide/">Developer's Guide</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../kubernetes/">Kubernetes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../benchmark/">Benchmark</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../enterprise/">Enterprise</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">MainfluxLabs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Authorization</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="authorization">Authorization<a class="headerlink" href="#authorization" title="Permanent link">#</a></h1>
<p>At the beginning, it is necessary to ensure access to the platform for users. 
<strong>User registration in the system is performed exclusively by the platform administrator or <code>Root Admin</code>.</strong></p>
<p>After the user is registered by the <code>Root Admin</code>, in order to be able to manage entities within the system, it is necessary to have certain rights.
Mainflux uses <strong>roles</strong> to control permissions for entities at two levels: at the Organization level and at the Group level.</p>
<p><em>More information about creating a user can be found at <a href="../api/#users">Users API</a></em>.</p>
<hr />
<h2 id="roles">Roles<a class="headerlink" href="#roles" title="Permanent link">#</a></h2>
<p>Roles determine the permissions a User has within an Organization or Group.
Below are the predefined roles in the system:</p>
<h3 id="viewer">Viewer<a class="headerlink" href="#viewer" title="Permanent link">#</a></h3>
<ul>
<li>Can only view entities (read-only access).</li>
<li>Applies to both Organization and Group levels.</li>
</ul>
<h3 id="editor">Editor<a class="headerlink" href="#editor" title="Permanent link">#</a></h3>
<ul>
<li>Can create, delete, and view entities within the Organization or Group (more details are in the table below).</li>
</ul>
<h3 id="admin">Admin<a class="headerlink" href="#admin" title="Permanent link">#</a></h3>
<ul>
<li>Has all the permissions of an editor.</li>
<li>Can assign and unassign Members to the Organization or Group.</li>
</ul>
<h3 id="owner">Owner<a class="headerlink" href="#owner" title="Permanent link">#</a></h3>
<ul>
<li>Has all the permissions of an admin.</li>
<li>Has access to all entities within the Organization or Group they own.</li>
</ul>
<h3 id="root-admin">Root Admin<a class="headerlink" href="#root-admin" title="Permanent link">#</a></h3>
<ul>
<li>Has all permissions across all Organizations and Groups (and entities within them).</li>
<li>Acts as the primary administrator for the entire platform.</li>
</ul>
<blockquote>
<p>Although these roles are the same for an Organization and a Group, <strong>they operate completely separately at those levels</strong>, 
which means that one User <strong>can have different roles</strong> in an Organization and a Group within that Organization.</p>
</blockquote>
<h2 id="org-members">Org Members<a class="headerlink" href="#org-members" title="Permanent link">#</a></h2>
<p>When a logged-in User creates an Organization, they become the <code>Owner</code> of that Organization.
Within it, they can add other registered users by assigning them appropriate roles defined in the table above.</p>
<p>Unlike an <code>Admin</code> of the Organization, an <code>Owner</code> has full rights over the entities within their Organization, meaning they can manage Groups and entities in Groups without an explicit Group membership.</p>
<p>For a simpler understanding of access control in an Org, the table below provides a clear overview:</p>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Viewer</th>
<th>Editor</th>
<th>Admin</th>
<th>Owner</th>
<th>Root Admin</th>
</tr>
</thead>
<tbody>
<tr>
<td>View Org</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Update Org</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Delete Org</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Assign/Unassign Members</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Create Groups</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
</tbody>
</table>
<p>The operation 'Create Org' is omitted from the table because every registered (and logged-in) user has the right to do so.</p>
<p><em>An example of assigning Members to an Organization can be found at <a href="../api/#org-members">Org Members API</a>.</em></p>
<h3 id="examples-of-unauthorized-access">Examples of unauthorized access<a class="headerlink" href="#examples-of-unauthorized-access" title="Permanent link">#</a></h3>
<p>Let's imagine that we have one Organization and four Members of that Organization with different roles:</p>
<table>
<thead>
<tr>
<th>org_id</th>
<th>member_id</th>
<th>role</th>
</tr>
</thead>
<tbody>
<tr>
<td>550e8400-e29b-41d4-a716-446655440000</td>
<td>3f3f9cc2-1a84-40cd-a7fb-02d9c5e1e5c8</td>
<td>viewer</td>
</tr>
<tr>
<td>550e8400-e29b-41d4-a716-446655440000</td>
<td>6b9e77a1-22f8-4e72-b2f3-122ad8b37f48</td>
<td>editor</td>
</tr>
<tr>
<td>550e8400-e29b-41d4-a716-446655440000</td>
<td>c9b8f7d5-8143-47b4-9d72-f83d3f73834e</td>
<td>admin</td>
</tr>
<tr>
<td>550e8400-e29b-41d4-a716-446655440000</td>
<td>f1c6e7b3-4b29-496a-810b-bf7397dc3842</td>
<td>owner</td>
</tr>
</tbody>
</table>
<ul>
<li>If a <code>Viewer</code> tries to create a Group within that Organization, they will receive a message indicating that the creation has failed:</li>
</ul>
<blockquote>
<p><strong>{"error": "failed to perform authorization over the entity"}</strong></p>
</blockquote>
<ul>
<li>In the second case, if a <code>Viewer</code> or <code>Editor</code> tries to invite new users to the Organization, they will also get the above error message.</li>
<li>Next case, if an <code>Admin</code> attempts to access entities within that Organization's Groups (of which they are not a Member), access will also be denied with an authorization failure message.</li>
<li>The same error message will be received if the <code>Owner</code>, or any other Organization Member who is not a <code>Root Admin</code>, tries to access an Organization in which they are not Members.</li>
</ul>
<h2 id="group-members">Group Members<a class="headerlink" href="#group-members" title="Permanent link">#</a></h2>
<p>In order to enable the correct management of the entities within the Group, the rights that the members have over these entities are checked.
Rights over entities are defined based on <u>the role in the Group</u> in which they belong.</p>
<p>As previously emphasized, roles in an Organization and roles in a Group are independent and don't affect each other, which means that if a User is a <code>Viewer</code> in an Organization and a Group <code>Admin</code> adds them to the Group as an <code>Editor</code>, they will have higher rights in the Group than the rights they have in the Organization.</p>
<p>By creating a Group, the User becomes its <code>Owner</code> and has the rights defined in the table.</p>
<p>For a simpler understanding of access control in a Group, the table below provides a clear overview:</p>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Viewer</th>
<th>Editor</th>
<th>Admin</th>
<th>Owner</th>
<th>Root Admin</th>
</tr>
</thead>
<tbody>
<tr>
<td>View Group</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Update Group</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Delete Group</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Assign/Unassign Members</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Create Group Entities</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>View Group Entities</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Update Group Entities</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Delete Group Entities</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
</tbody>
</table>
<p>The 'Create Group' operation is omitted from the table because the rights are defined in the Org table, where it can be clearly seen that everyone except the Organization Viewer can create a Group.</p>
<p>If we keep the data from the previous table and expand it with new data by creating Groups within the Organization and assigning Group roles to the existing members of the Organization, 
the additional table would look like this:</p>
<table>
<thead>
<tr>
<th>org_id</th>
<th>group_id</th>
<th>member_id</th>
<th>role</th>
</tr>
</thead>
<tbody>
<tr>
<td>550e8400-e29b-41d4-a716-446655440000</td>
<td>9f8e7a61-d34e-4a7a-9836-df8c3f54d3a1</td>
<td>3f3f9cc2-1a84-40cd-a7fb-02d9c5e1e5c8</td>
<td>editor</td>
</tr>
<tr>
<td>550e8400-e29b-41d4-a716-446655440000</td>
<td>15ee88e2-3632-41fb-acfa-2625645a2b8d</td>
<td>6b9e77a1-22f8-4e72-b2f3-122ad8b37f48</td>
<td>viewer</td>
</tr>
<tr>
<td>550e8400-e29b-41d4-a716-446655440000</td>
<td>565ddcfb-bf64-4e6b-80ac-371516bd0e01</td>
<td>c9b8f7d5-8143-47b4-9d72-f83d3f73834e</td>
<td>admin</td>
</tr>
</tbody>
</table>
<p>We can notice that the User who has the role of <code>Viewer</code> in the Organization now has the role of <code>Editor</code> in the group with ID <code>9f8e7a61-d34e-4a7a-9836-df8c3f54d3a1</code>. 
This means that the User now has all the rights provided by that role.</p>
<p>On the other hand, the User with ID <code>6b9e77a1-22f8-4e72-b2f3-122ad8b37f48</code> who is an Organization <code>Editor</code> now has the Group's <code>Viewer</code> role. 
Therefore, that Member has no rights in the Group other than viewing.</p>
<p>Since the <code>Admin</code> of the Organization is also the <code>Admin</code> of the Group with ID <code>565ddcfb-bf64-4e6b-80ac-371516bd0e01</code>, it means that they have the same rights.</p>
<p>Based on the above examples of unauthorized access within the Organization, the same rules are applied within the Group based on the roles of the Members.</p>
<p>In addition to the basic access rights that apply to Members, note the case of Thing creation.
When creating a Thing, it needs to be assigned a specific Profile by specifying its ID. The Profile being assigned and the Thing <u> must belong to the same Group. </u></p>
<p><em>An example of assigning Members to a Group can be found at <a href="../api/#group-members">Group Members API</a>.</em></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../authentication/" class="btn btn-neutral float-left" title="Authentication"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../api/" class="btn btn-neutral float-right" title="API">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright (c) MainfluxLabs</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/MainfluxLabs/mainflux" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../authentication/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../api/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
